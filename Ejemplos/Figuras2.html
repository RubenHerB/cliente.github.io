<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
    <title>Numero random</title>
</head>
<body>
<form action="#" id="f">
    Escoje la figura:
    <select id="s">
        <option value="3">Triangulo</option>
        <option value="4">Cuadrado</option>
        <option value="5">Poligono regular</option>
    </select><br>   
    <button type="button" onclick="sf()">Seleccionar figura</button><br>
    <p id="nlt"></p>
    <input type="hidden" id="nl">
    <br><br>
    <button hidden="hidden" id="bnl" onclick="snl()">Seleccionar numero de lados</button>
    <div id="lados"></div>
</form>
<button hidden="hidden" type="button" id="cal" onclick="calc()">Calcular perimetro</button>
<script>
   var nl=0;
   var l=0;
    function sf(){
        document.getElementById("lados").innerHTML="";
        nl=parseInt(document.getElementById("s").value);
    if(nl==5){
        document.getElementById("nlt").innerHTML="Introduzca el numero de lados del poligono regular:";
        document.getElementById("nl").type="text";
        document.getElementById("bnl").removeAttribute("hidden");

        document.getElementById("cal").setAttribute("hidden","hidden");
    }else{
        generar_textbox_lados(nl);
        document.getElementById("cal").removeAttribute("hidden");

        document.getElementById("nlt").innerHTML="";
        document.getElementById("nl").type="hidden";
        document.getElementById("bnl").setAttribute("hidden","hidden");
    }
    }

    function snl(){
        
        var anl=parseInt(document.getElementById("nl").value);
        if(isNaN(anl)||anl<=2){
            alert("Introduce un valor correcto (numeros enteros mayores de 2)");
        }else{
            nl=anl;




        document.getElementById("cal").removeAttribute("hidden");
    }}

    function generar_textbox_lados(n){
        for(var i=0;i<n;i++){
                document.getElementById("lados").innerHTML+="Introduzca la longitud del lado "+(i+1)+"<br><input type=\"text\" id=\"l"+i+"\"><br>";
    }}
    function calc(){
        l=parseFloat(document.getElementById("ll").value);
        if(isNaN(l)||l<=0){
            alert("Introduce un valor correcto (numeros enteros o decimales mayores de 0)");
        }else{
            alert("El perimetro es "+l*nl);
        }
    }
</script>
</body>
</html>