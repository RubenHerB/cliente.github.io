<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html"; charset="utf-8" />
        <title>Lista</title>
        <script type="text/javascript" src="preguntas.js"></script>
        <style>
            button {margin-left: 5px; margin-right: 5px}
        </style>
    </head>
    <body>
        <h1>Test de javascript</h1>
        <div id="preguntas"></div>
        <button onclick="comprobar()">Comprobar respuestas</button>
        <div id="resultado"></div>
        <script type="text/javascript">
            var output = document.getElementById("preguntas");
            function preguntasshufle(obj){
                var res=[ [obj.verdadera,1], [obj.falsa1,0], [obj.falsa2,0], [obj.falsa3,0]];
                return res.sort((a, b) => 0.5 - Math.random());
            }

            for (var i=0; i<preguntas.length; i++) {
                output.innerHTML+="<div><fieldset id=\"pregunta"+i+"\"><legend>"+preguntas[i].pregunta+"</legend></fieldset><div id=\"res"+i+"\"></div></div>";

                var p=preguntasshufle(preguntas[i]);    
                for (var j=0 ; j<p.length ; j++) {
                    document.getElementById("pregunta"+i).innerHTML+="<input type=\"radio\" name=\"p"+i+"\" id=\""+i+"p"+j+"\"  value=\""+p[[j][1]]+"\"><label for=\""+i+"p"+j+"\">"+p[[j][0]]+"</label><br>";
                }

                if (i<(preguntas.length-1)){
                    output.innerHTML+="<hr>"
                }
            }

            function comprobar(){
                var nota=0;
                for (var i=0; i<preguntas.length; i++) {
                    var res=document.getElementById("pregunta"+i).value;
                    nota+=res;
                    if (res==1){
                        document.getElementById("res"+i).innerHTML=
                        document.getElementById("res"+i).style.color="light-green";
                    }
                }
            }
        </script>
    </body>
</html>